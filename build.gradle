/**
 * Plugins
 */
plugins {
    id 'java'
    id 'application'
//    id 'com.github.onslip.gradle-one-jar' version '1.0.5'
}

//apply plugin: 'gradle-one-jar'

/**
 * Project Info
 */
sourceCompatibility = 1.8
targetCompatibility = 1.8
//version = getVersion()
version = 1.0
mainClassName = 'App'

/**
 * Repositories
 */
repositories {
    mavenCentral()
}

/**
 * Dependencies
 */
dependencies {
    compile 'com.google.apis:google-api-services-androidpublisher:v3-rev23-1.25.0'
    compile 'args4j:args4j:2.33'
    compile 'net.dongliu:apk-parser:2.6.2'
}


/**
 * Get version from last git tag.
 * @returns Last git tag
 */
def getVersion(){
    def out = new ByteArrayOutputStream();
    exec {
        executable = 'git'
        args = ['describe', '--tags']
        standardOutput = out
    }
    return out.toString().replace('\n','')
}

task unzip(type: Copy) {
    def zipFile = file('build/distributions/PlayStoreUploader-1.0.zip')
    def outputDir = file("build/unpacked/dist")

    from zipTree(zipFile)
    into outputDir
}
//task PlayStoreUploader(type: OneJar) {
//    mainClass = 'App'
//}
